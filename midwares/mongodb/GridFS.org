#+TITLE:     GridFS
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


* 1, 基本原理


文件的元信息保存在 fs.files 集合中，每个文档表示 GridFS 中的一个文件。

块数据保存在 fs.chunks 集合中。


** 1.1, 缺点

- 如果要修改 GridFS 上的文档，只能先将已有文档删除，再将整个文档重新保存。
- MongoDB 将文件作为多个文档进行存储，所以无法在同一时间对文件中的所有块加锁。

* 2, 常用命令

** 2.1, 上传文件

=mongofiles put <file>=

** 2.2, 列出文件

=mongofiles list=

** 2.3, 下载文件

=mongofiles get <file>=
