#+TITLE:     ngx_http_proxy_module
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


* 概述

缓存分为两个部分：

- 共享内存部分

  存储键和缓存对象的元数据

- 磁盘空间部分

  存储具体数据

* 设置缓存

proxy_cache_path 不能定义在 server{} 上下文中

#+BEGIN_SRC sh
  proxy_cache_path /path/to/cache levels=1:2 keys_zone=cache80:20m max_size=1g;

  server {
      listen 80;
      server_name localhost;
      location / {
          root /path/to/html;
          proxy_cache cache80;
          proxy_cache_valid 200 10m;
      }
  }
#+END_SRC
