#+TITLE:     ngx_http_rewrite_module
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


* 一，条件判断

#+BEGIN_SRC sh
  location / {
      valid_referer none blocked www.mydomain.com mydomain.com;
      if ($invalid_referer) {
          return 403;
      }
  }
#+END_SRC

* 二，重写 URL

#+BEGIN_SRC sh
location /images/ {
    rewrite ^/images/(.*)$ http://1.2.3.4/images/$1/; ## 浏览器重定向至 http://1.2.3.4/images/$1
}
#+END_SRC

#+BEGIN_SRC sh
location /images/ {
    rewrite ^/images/(.*)$ /pictures/$1/; ## Nginx 内部资源重定位（隐式重定向）
}
#+END_SRC
