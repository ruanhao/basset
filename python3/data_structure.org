#+TITLE:     Data Structure
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall

* 生成器

生成器保存的是算法，每次调用 next(g) ，就计算出 g 的下一个元素的值，\\
直到计算到最后一个元素，没有更多的元素时，抛出 StopIteration 异常。

- 函数表示法

  如果一个函数定义中包含 yield 关键字，那么这个函数就不再是一个普通函数，而是一个生成器。\\
  在每次调用 next(g) 的时候执行，遇到 yield 语句返回，再次执行时从上次返回的 yield 语句处继续执行。

  #+BEGIN_SRC python
    def fib(max):
        n, a, b = 0, 0, 1
        while n < max:
            yield b
            a, b = b, a + b
            n = n + 1
        return 'done'
  #+END_SRC


* 字典

dict 的 key 必须是不可变对象

** 有序字典

  #+BEGIN_SRC python
    from collections import OrderedDict

    favorite_languages = OrderedDict()

    favorite_languages['jen']    = 'python'
    favorite_languages['sarah']  = 'c'
    favorite_languages['edward'] = 'ruby'
    favorite_languages['phil']   = 'python'

    for name, language in favorite_languages.items():
        print(name.title() + "'s favorite language is " + language.title() + ".")
  #+END_SRC


** 默认值字典

  使用 dict 时，如果引用的 Key 不存在，就会抛出 KeyError 。如果希望 key 不存在时，返回一个默认值，就可以用 defaultdict。

  #+BEGIN_SRC python
    from collections import defaultdict
    dd = defaultdict(lambda: 'N/A')
    dd['key1'] = 'abc'
    dd['key1']                      # 'abc'
    dd['key2']                      # 'N/A'
  #+END_SRC

  默认值是调用函数返回的，而函数在创建 defaultdict 对象时传入。\\
  除了在 Key 不存在时返回默认值，defaultdict 的其他行为跟 dict 是完全一样的。


** 计数器

  #+BEGIN_SRC python
    from collections import Counter
    c = Counter()
    for ch in 'programming':
        c[ch] = c[ch] + 1

    # c: Counter({'g': 2, 'm': 2, 'r': 2, 'a': 1, 'i': 1, 'o': 1, 'n': 1, 'p': 1})
  #+END_SRC
