#+TITLE:     File
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


* 一，基本知识

* 二，常见用法

- 读写文件

  #+BEGIN_SRC python
    with open('/path/to/file', 'r') as f:
        print(f.read())

    with open('/Users/michael/gbk.txt', 'r', encoding='gbk', errors='ignore') as f:
        print(f.read())
  #+END_SRC

  + 调用 read() 一次性读取文件的全部内容
  + 调用 read(size) 每次最多读取 size 个字节的内容
  + 调用 readline() 每次读取一行内容
  + 调用 readlines() 一次性读取所有内容并按行返回列表

  #+BEGIN_SRC python
    with open('/Users/michael/test.txt', 'w') as f:
        f.write('Hello, world!')
  #+END_SRC

- 内存中读写 str

  #+BEGIN_SRC python
    from io import StringIO
    f = StringIO()
    f.write('hello')                # 5
    f.write(' ')                    # 1
    f.write('world!')               # 6
    print(f.getvalue())             # hello world!

    f = StringIO('Hello!\nHi!\nGoodbye!')
    while True:
        s = f.readline()
        if s == '':                 # 读到末尾
            break
        print(s.strip())
  #+END_SRC

- 内存中读写 bytes

  #+BEGIN_SRC python
    from io import BytesIO
    f = BytesIO()
    f.write('中文'.encode('utf-8'))  # 注意，写入的不是 str，而是经过 UTF-8 编码的 bytes
    print(f.getvalue())              # b'\xe4\xb8\xad\xe6\x96\x87'

    f = BytesIO(b'\xe4\xb8\xad\xe6\x96\x87')
    f.read()                        # b'\xe4\xb8\xad\xe6\x96\x87'
  #+END_SRC
