#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall

#+BEGIN_SRC shell


: ${variable?error_msg} ## 一种检查变量是否设置的方法，
                        ## 若没有设置，则error_msg会输出到std_err中

num=$#; ${!num}         ## 最后一个参数
                        ## 不能直接写作${!$#}，这是一种**间接引用**
                        ## ruanhao: ${$num}是不允许的，因为变量替换不能嵌套，
                        ## 但是类似${var:$len}是可行的

## **赋值时变量不扩展**
var1="hello world"
var2=$var1    ## var2: "hello world"
echo $var1    ## equals 'echo hello world'
## **数组赋值例外**
b=( 1 2 3 )
a=( ${b[*]} ) ## a has 3 elements, not "1 2 3"

${!varprefix*} ## 匹配所有之前声明过的，并且以varprefix开头的变量
${!varprefix@} ## 同上
xyz23=whatever
xyz24=
a=${!xyz*}                     ## 展开所有以"xyz"开头的，并且之前声明过的变量名
echo "a = $a"                  ## a = xyz23 xyz24
a=${!xyz@}                     ## 同上

(( t = a < 1 ? 2 : 3 ))        ## C语言风格的三元操作

: $(( n = 3 ))     ## 这里利用了$(())的副作用
(( n = 3 ))        ## 上一条的简便写法
: $[ n = 3 ]       ## 少用这种形式

a=3
echo hello | (cat; a=888)
echo $a  ## 3
echo hello | {cat; a=888}
echo $a  ## 888

for i in {0..100..3}; do
    echo $i
done

#+END_SRC



** History

#+BEGIN_SRC sh
!:0   # get the command that was executed
!:1   # get the first argument (and !:2 the second, etc.)
!:2-3 # get the second and third arguments
!:^   # another way to get the first argument. !:$ will get the last
!:*   # get all arguments (but not the command)



# Modifiers can also be appended to a ! history command, each prefixed by a colon
# Any number can be stacked on (e.g. !:t:r:p).

h # Line up to the base filename
t # Only the base filename
r # Line up to the filename extension
e # Only the filename extension
s/search/replacement  # Replace the first occurrence of search with replacement
gs/search/replacement # Replace all occurrences of search with replacement


#+END_SRC

** =glob-expand-word=

Ctrl X * (Esc *)
