#+TITLE:     lsof (List Open File)
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


* lsof

列出所有程序打开的文件

* lsof /path/to/file1 /path/to/file2

列出所有使用这些文件的程序

* lsof +D /path

查看指定路径下所有正在被使用的文件

* lsof -p <pid>

列出被某一进程所使用的文件

* lsof -i

查看所有开启 socket 的程序

* lsof -i tcp

查看使用 tcp socket 的程序

* lsof -i tcp:80

查看使用了 tcp:80 端口的程序

* lsof -i :80

查看使用了 80 端口的程序

* lsof -i@10.74.68.81

查看使用了 10.74.68.81 地址的程序

* lsof -n

避免域名解析

* lsof -P

避免端口解析

* lsof -c <command>

列出由某个命令打开的所有文件，命令可以先使用 lsof -i 查看

* lsof -d <fd>

查看指定文件描述符的文件

* lsof -t

输出使用某文件的程序的 pid

* lsof -r <second>

循环监控

* And & Or

lsof -u ruan -c apache    ## 用户是 ruan 或命令是 apache

lsof -a -u ruan -c apache ## 用户是 ruan 并且命令是 apache

* lsof -u root / lsof -u ^root

监控指定用户打开的文件
