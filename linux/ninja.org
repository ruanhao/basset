#+TITLE:     Command Ninja
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


* 文本操作

- 查看字符的字节

  #+BEGIN_SRC
  echo ∴ → ☿ ★ | hexdump -C
  showkey -a
  #+END_SRC

- 忘记单词如何拼写

  #+BEGIN_SRC
  look man ## 查找以 man 开头的单词
  #+END_SRC

- 查看 Ascii 码表

  =man ascii=

- 打印水平行

  #+BEGIN_SRC
  printf '%100s\n' | tr ' ' =
  #+END_SRC

- 生成随机数

  #+BEGIN_SRC
  head -c4 /dev/urandom | od -An -tu4
  #+END_SRC

- 重复单词

  #+BEGIN_SRC
  echo hello{,,}
  #+END_SRC

- 大小写转换

  #+BEGIN_SRC
  echo ${var^^}
  echo ${var,,}
  #+END_SRC


* 文件操作

- 列出系统中已打开的大文件

  =lsof / | awk '{ if($7 > 1048576) print $7/1048576 "MB "$9 }' | sort -n -u | tail=

- 反向删除文件

  #+BEGIN_SRC
  rm !(*.foo|*.bar|*.baz)
  #+END_SRC




* 进程信息

- 截获进程 stdout/stderr

  =strace -ff -e trace=write -e write=1,2 -p <pid>=


* 操作系统信息

- 查看块设备

  =lsblk -f=

- 内核模块目录

  =/lib/modules/$(uname -r)/kernel=

- 查看当前最大句柄数

  =cat /proc/sys/fs/file-max=

- 查看终端信息

  =tput longname=

- 查看共享库依赖

  =ldd <executable_file>=

- 查看挂载信息

  #+BEGIN_SRC
  mount | column -t

  cut -d ' ' -f1,2 /etc/mtab
  #+END_SRC

- 查看内核模块依赖

  #+BEGIN_SRC
  lsmod | perl -e 'print "digraph \"lsmod\" {";<>;while(<>){@_=split/\s+/; print "\"$_[0]\" -> \"$_\"\n" for split/,/,$_[3]}print "}"' | dot -Tpng | display -
  ##  Draw kernel module dependancy graph. parse `lsmod' output and pass to `dot' drawing utility then finally pass it to an image viewer
  #+END_SRC

- 查看待写入磁盘数据

    #+BEGIN_SRC
    grep ^Dirty /proc/meminfo
    ## find out how much data is waiting to be written to disk
    #+END_SRC

- 查看分区信息

    =file -s /dev/sd*=

- 查看内存中的数据

  #+BEGIN_SRC
  strings /dev/mem
  ## A fun thing to do with ram is actually open it up and take a peek.
  ## This command will show you all the string (plain text) values in ram
  #+END_SRC

- 查看错误码对应信息

  =perror <code>=

- 查看操作系统位数

  #+BEGIN_SRC
  getconf LONG_BIT
  getconf -a ## 列出所有信息
  #+END_SRC


* 网络

- 扫描网段中的主机

  #+BEGIN_SRC
  nmap -sP 192.168.1.0/24  ## list alive hosts in specific subnet
  #+END_SRC
