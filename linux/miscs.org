#+TITLE:     miscs
#+AUTHOR:    Hao Ruan
#+EMAIL:     ruanhao1116@gmail.com
#+LANGUAGE:  en
#+LINK_HOME: http://www.github.com/ruanhao
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/style.css" />
#+OPTIONS:   H:2 num:nil \n:nil @:t ::t |:t ^:{} _:{} *:t TeX:t LaTeX:t
#+STARTUP:   showall


- 查看待写入磁盘数据大小

  =grep ^Dirty /proc/meminfo=

- 内核模块依赖关系

  #+BEGIN_SRC sh
    lsmod | perl -e 'print "digraph \"lsmod\" {";<>;while(<>){@_=split/\s+/; print "\"$_[0]\" -> \"$_\"\n" for split/,/,$_[3]}print "}"' |\
        dot -Tpng |\
        display -
  #+END_SRC

- 查看共享库依赖

  =ldd <executable_file>=

- 截获进程的输入输出

  #+BEGIN_SRC sh
    strace -ff -e trace=write -e write=1,2 -p <pid>
  #+END_SRC

- 列出系统中打开的大文件

  =lsof / | awk '{ if($7 > 1048576) print $7/1048576 "MB "$9 }' | sort -n -u | tail=